// Code generated by "make app-layers"
// DO NOT EDIT

package sub_app_iface

import (
	"github.com/site-name/decimal"
	goprices "github.com/site-name/go-prices"
	"github.com/sitename/sitename/app/plugin/interfaces"
	"github.com/sitename/sitename/model"
	"github.com/sitename/sitename/modules/measurement"
	"gorm.io/gorm"
)

// CheckoutService contains methods for working with checkouts
type CheckoutService interface {
	// AddPromoCodeToCheckout Add gift card or voucher data to checkout.
	// Raise InvalidPromoCode if promo code does not match to any voucher or gift card.
	AddPromoCodeToCheckout(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, promoCode string, discounts []*model.DiscountInfo) (*model.InvalidPromoCode, *model.AppError)
	// AddVariantToCheckout adds a product variant to checkout
	//
	// `quantity` default to 1, `replace` default to false, `checkQuantity` default to true
	AddVariantToCheckout(checkoutInfo *model.CheckoutInfo, variant *model.ProductVariant, quantity int, replace bool, checkQuantity bool) (*model.Checkout, *model.InsufficientStock, *model.AppError)
	// AddVariantsToCheckout Add variants to checkout.
	//
	// If a variant is not placed in checkout, a new checkout line will be created.
	// If quantity is set to 0, checkout line will be deleted.
	// Otherwise, quantity will be added or replaced (if replace argument is True).
	//
	//	skipStockCheck and replace are default to false
	AddVariantsToCheckout(checkout *model.Checkout, variants []*model.ProductVariant, quantities []int, channelSlug string, skipStockCheck, replace bool) (*model.Checkout, *model.InsufficientStock, *model.AppError)
	// AddVoucherCodeToCheckout Add voucher data to checkout by code.
	// Raise InvalidPromoCode() if voucher of given type cannot be applied.
	AddVoucherCodeToCheckout(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, voucherCode string, discounts []*model.DiscountInfo) (*model.InvalidPromoCode, *model.AppError)
	// AddVoucherToCheckout Add voucher data to checkout.
	// Raise NotApplicable if voucher of given type cannot be applied.
	AddVoucherToCheckout(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, voucher *model.Voucher, discounts []*model.DiscountInfo) (*model.NotApplicable, *model.AppError)
	// BaseCheckoutLineTotal Return the total price of this line
	//
	// `discounts` can be nil
	BaseCheckoutLineTotal(checkoutLineInfo *model.CheckoutLineInfo, channel *model.Channel, discounts []*model.DiscountInfo) (*goprices.TaxedMoney, *model.AppError)
	// BaseCheckoutLineUnitPrice divide given totalLinePrice to given quantity and returns the result
	BaseCheckoutLineUnitPrice(totalLinePrice *goprices.TaxedMoney, quantity int) *goprices.TaxedMoney
	// BaseCheckoutShippingPrice
	BaseCheckoutShippingPrice(checkoutInfo *model.CheckoutInfo, lines model.CheckoutLineInfos) (*goprices.TaxedMoney, *model.AppError)
	// BaseCheckoutTotal returns the total cost of the checkout
	//
	// NOTE: discount must be either Money, TaxedMoney, *Money, *TaxedMoney
	BaseCheckoutTotal(subTotal *goprices.TaxedMoney, shippingPrice *goprices.TaxedMoney, discount interface{}, currency string) (*goprices.TaxedMoney, *model.AppError)
	// CalculateCheckoutTotalWithGiftcards
	CalculateCheckoutTotalWithGiftcards(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, address *model.Address, discounts []*model.DiscountInfo) (*goprices.TaxedMoney, *model.AppError)
	// CalculatePriceForShippingMethod Return checkout shipping price
	CalculatePriceForShippingMethod(checkoutInfo *model.CheckoutInfo, shippingMethodInfo *model.ShippingMethodInfo, lines model.CheckoutLineInfos) (*goprices.TaxedMoney, *model.AppError)
	// CancelActivePayments set all active payments belong to given checkout
	CancelActivePayments(checkout *model.Checkout) *model.AppError
	// CheckVariantInStock
	CheckVariantInStock(checkout *model.Checkout, variant *model.ProductVariant, channelSlug string, quantity int, replace, checkQuantity bool) (int, *model.CheckoutLine, *model.InsufficientStock, *model.AppError)
	// CheckoutByOption returns a checkout filtered by given option
	CheckoutByOption(option *model.CheckoutFilterOption) (*model.Checkout, *model.AppError)
	// CheckoutLastActivePayment returns the most recent payment made for given checkout
	CheckoutLastActivePayment(checkout *model.Checkout) (*model.Payment, *model.AppError)
	// CheckoutLineTotal Return the total price of provided line, taxes included.
	//
	// It takes in account all plugins.
	CheckoutLineTotal(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, checkoutLineInfo *model.CheckoutLineInfo, discounts []*model.DiscountInfo) (*goprices.TaxedMoney, *model.AppError)
	// CheckoutLinesByOption returns a list of checkout lines filtered using given option
	CheckoutLinesByOption(option *model.CheckoutLineFilterOption) ([]*model.CheckoutLine, *model.AppError)
	// CheckoutShippingPrice Return checkout shipping price.
	//
	// It takes in account all plugins.
	CheckoutShippingPrice(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, address *model.Address, discounts []*model.DiscountInfo) (*goprices.TaxedMoney, *model.AppError)
	// CheckoutShippingRequired checks if given checkout require shipping
	CheckoutShippingRequired(checkoutToken string) (bool, *model.AppError)
	// CheckoutSubTotal Return the total cost of all the checkout lines, taxes included.
	CheckoutSubTotal(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, address *model.Address, discounts []*model.DiscountInfo) (*goprices.TaxedMoney, *model.AppError)
	// CheckoutTotal Return the total cost of the checkout.
	//
	// Total is a cost of all lines and shipping fees, minus checkout discounts,
	// taxes included.
	//
	// It takes in account all plugins.
	CheckoutTotal(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, address *model.Address, discounts []*model.DiscountInfo) (*goprices.TaxedMoney, *model.AppError)
	// CheckoutTotalGiftCardsBalance Return the total balance of the gift cards assigned to the checkout
	CheckoutTotalGiftCardsBalance(checkOut *model.Checkout) (*goprices.Money, *model.AppError)
	// CheckoutTotalWeight calculate total weight for given checkout lines (these lines belong to a single checkout)
	CheckoutTotalWeight(checkoutLineInfos []*model.CheckoutLineInfo) (*measurement.Weight, *model.AppError)
	// CheckoutsByOption returns a list of checkouts, filtered by given option
	CheckoutsByOption(option *model.CheckoutFilterOption) ([]*model.Checkout, *model.AppError)
	// CleanCheckoutShipping
	CleanCheckoutShipping(checkoutInfo model.CheckoutInfo, lines model.CheckoutLineInfos) *model.AppError
	// DeleteCheckoutsByOption tells store to delete checkout(s) rows, filtered using given option
	DeleteCheckoutsByOption(transaction *gorm.DB, option *model.CheckoutFilterOption) *model.AppError
	// FetchCheckoutInfo Fetch checkout as CheckoutInfo object
	FetchCheckoutInfo(checkOut *model.Checkout, lines []*model.CheckoutLineInfo, discounts []*model.DiscountInfo, manager interfaces.PluginManagerInterface) (*model.CheckoutInfo, *model.AppError)
	// FetchCheckoutLines Fetch checkout lines as CheckoutLineInfo objects.
	// It prefetch some related value also
	FetchCheckoutLines(checkOut *model.Checkout) ([]*model.CheckoutLineInfo, *model.AppError)
	// GetCustomerEmail returns checkout's user's email
	GetCustomerEmail(ckout *model.Checkout) (string, *model.AppError)
	// GetDeliveryMethodInfo takes `deliveryMethod` is either *model.ShippingMethod or *model.Warehouse
	GetDeliveryMethodInfo(deliveryMethod interface{}, address *model.Address) (model.DeliveryMethodBaseInterface, *model.AppError)
	// GetPricesOfDiscountedSpecificProduct Get prices of variants belonging to the discounted specific products.
	// Specific products are products, collections and categories.
	// Product must be assigned directly to the discounted category, assigning
	// product to child category won't work.
	GetPricesOfDiscountedSpecificProduct(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, voucher *model.Voucher, discounts []*model.DiscountInfo) ([]*goprices.Money, *model.AppError)
	// GetValidCollectionPointsForCheckout Return a collection of `Warehouse`s that can be used as a collection point.
	// Note that `quantity_check=False` should be used, when stocks quantity will
	// be validated in further steps (checkout completion) in order to raise
	// 'InsufficientProductStock' error instead of 'InvalidShippingError'.
	GetValidCollectionPointsForCheckout(lines model.CheckoutLineInfos, countryCode model.CountryCode, quantityCheck bool) ([]*model.WareHouse, *model.AppError)
	// GetValidShippingMethodListForCheckoutInfo
	GetValidShippingMethodListForCheckoutInfo(checkoutInfo model.CheckoutInfo, shippingAddress *model.Address, lines []*model.CheckoutLineInfo, discounts []*model.DiscountInfo, manager interfaces.PluginManagerInterface) ([]*model.ShippingMethod, *model.AppError)
	// GetValidShippingMethodsForCheckout finds all valid shipping methods for given checkout
	GetValidShippingMethodsForCheckout(checkoutInfo model.CheckoutInfo, lineInfos []*model.CheckoutLineInfo, subTotal *goprices.TaxedMoney, countryCode model.CountryCode) ([]*model.ShippingMethod, *model.AppError)
	// GetVoucherDiscountForCheckout Calculate discount value depending on voucher and discount types.
	// Raise NotApplicable if voucher of given type cannot be applied.
	GetVoucherDiscountForCheckout(manager interfaces.PluginManagerInterface, voucher *model.Voucher, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, address *model.Address, discounts []*model.DiscountInfo) (*goprices.Money, *model.NotApplicable, *model.AppError)
	// GetVoucherForCheckout returns voucher with voucher code saved in checkout if active or None
	//
	// `withLock` default to false
	GetVoucherForCheckout(checkoutInfo model.CheckoutInfo, vouchers model.Vouchers, withLock bool) (*model.Voucher, *model.AppError)
	// IsFullyPaid Check if provided payment methods cover the checkout's total amount.
	// Note that these payments may not be captured or charged at all.
	IsFullyPaid(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, discounts []*model.DiscountInfo) (bool, *model.AppError)
	// Logic required to finalize the checkout and convert it to order.
	// Should be used with transaction_with_commit_on_errors, as there is a possibility
	// for thread race.
	// :raises ValidationError
	//
	// NOTE: Make sure user is authenticated before calling this method.
	CompleteCheckout(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, paymentData map[string]interface{}, storeSource bool, discounts []*model.DiscountInfo, user *model.User, _ interface{}, siteSettings *model.Shop, trackingCode string, redirectURL string) (*model.Order, bool, model.StringMap, *model.PaymentError, *model.AppError)
	// RecalculateCheckoutDiscount Recalculate `checkout.discount` based on the voucher.
	// Will clear both voucher and discount if the discount is no longer applicable.
	RecalculateCheckoutDiscount(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, discounts []*model.DiscountInfo) *model.AppError
	// ReleaseVoucherUsage
	ReleaseVoucherUsage(orderData map[string]interface{}) *model.AppError
	// RemovePromoCodeFromCheckout Remove gift card or voucher data from checkout.
	RemovePromoCodeFromCheckout(checkoutInfo model.CheckoutInfo, promoCode string) *model.AppError
	// RemoveVoucherCodeFromCheckout Remove voucher data from checkout by code.
	RemoveVoucherCodeFromCheckout(checkoutInfo model.CheckoutInfo, voucherCode string) *model.AppError
	// RemoveVoucherFromCheckout removes voucher data from checkout
	RemoveVoucherFromCheckout(checkout *model.Checkout) *model.AppError
	// Save shipping address in checkout if changed.
	//
	// Remove previously saved address if not connected to any user.
	ChangeShippingAddressInCheckout(transaction *gorm.DB, checkoutInfo model.CheckoutInfo, address *model.Address, lines []*model.CheckoutLineInfo, discounts []*model.DiscountInfo, manager interfaces.PluginManagerInterface) *model.AppError
	// UpdateCheckoutInfoDeliveryMethod set CheckoutInfo's ShippingMethod to given shippingMethod
	// and set new value for checkoutInfo's ShippingMethodChannelListings
	// deliveryMethod must be either *ShippingMethod or *Warehouse or nil
	UpdateCheckoutInfoDeliveryMethod(checkoutInfo model.CheckoutInfo, deliveryMethod interface{}) *model.AppError
	// UpdateCheckoutInfoShippingAddress updates given `checkoutInfo` by setting given `address` as its ShippingAddress.
	// then updates its ValidShippingMethods
	UpdateCheckoutInfoShippingAddress(checkoutInfo model.CheckoutInfo, address *model.Address, lines []*model.CheckoutLineInfo, discounts []*model.DiscountInfo, manager interfaces.PluginManagerInterface) *model.AppError
	// UpsertCheckout saves/updates given checkout
	UpsertCheckouts(transaction *gorm.DB, checkouts []*model.Checkout) ([]*model.Checkout, *model.AppError)
	BaseOrderLineTotal(orderLine *model.OrderLine) (*goprices.TaxedMoney, *model.AppError)
	BaseTaxRate(price *goprices.TaxedMoney) (*decimal.Decimal, *model.AppError)
	BulkCreateCheckoutLines(checkoutLines []*model.CheckoutLine) ([]*model.CheckoutLine, *model.AppError)
	BulkUpdateCheckoutLines(checkoutLines []*model.CheckoutLine) *model.AppError
	CalculateCheckoutQuantity(lineInfos []*model.CheckoutLineInfo) (int, *model.AppError)
	ChangeBillingAddressInCheckout(transaction *gorm.DB, checkout *model.Checkout, address *model.Address) *model.AppError
	CheckoutCountry(ckout *model.Checkout) (model.CountryCode, *model.AppError)
	CheckoutLineWithVariant(checkout *model.Checkout, productVariantID string) (*model.CheckoutLine, *model.AppError)
	CheckoutLinesByCheckoutToken(checkoutToken string) ([]*model.CheckoutLine, *model.AppError)
	CheckoutSetCountry(ckout *model.Checkout, newCountryCode model.CountryCode) *model.AppError
	CleanBillingAddress(checkoutInfo model.CheckoutInfo) *model.AppError
	CleanCheckoutPayment(manager interfaces.PluginManagerInterface, checkoutInfo model.CheckoutInfo, lines []*model.CheckoutLineInfo, discounts []*model.DiscountInfo, lastPayment *model.Payment) (*model.PaymentError, *model.AppError)
	ClearDeliveryMethod(checkoutInfo model.CheckoutInfo) *model.AppError
	DeleteCheckoutLines(transaction *gorm.DB, checkoutLineIDs []string) *model.AppError
	GetDiscountedLines(checkoutLineInfos []*model.CheckoutLineInfo, voucher *model.Voucher) ([]*model.CheckoutLineInfo, *model.AppError)
	GetValidCollectionPointsForCheckoutInfo(shippingAddress *model.Address, lines []*model.CheckoutLineInfo, checkoutInfo *model.CheckoutInfo) ([]*model.WareHouse, *model.AppError)
	UpsertCheckoutLine(checkoutLine *model.CheckoutLine) (*model.CheckoutLine, *model.AppError)
	ValidateVariantsInCheckoutLines(lines []*model.CheckoutLineInfo) *model.AppError
	CheckLinesQuantity(variants model.ProductVariants, quantities []int, country model.CountryCode, channelSlug string, allowZeroQuantity bool, existingLines model.CheckoutLineInfos, replace bool) *model.AppError
	UpdateCheckoutShippingMethodIfValid(checkoutInfo *model.CheckoutInfo, lines model.CheckoutLineInfos) *model.AppError
}
